<Page xmlns="http://schemas.nativescript.org/tns.xsd" navigatingTo="onNavigatingTo">
    <ActionBar title="JIRA Export - ÐœÐ¾Ð±Ð¸Ð»ÑŒÐ½Ð¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ" />
    
    <TabView selectedIndex="0">
        <!-- Ð’ÐºÐ»Ð°Ð´ÐºÐ° Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸ -->
        <TabViewItem title="Ð’Ñ…Ð¾Ð´ Ð² JIRA">
            <ScrollView>
                <StackLayout class="login-content">
                    <Label text="ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº JIRA" class="login-title" />
                    
                    <StackLayout class="form-container">
                        <Label text="URL JIRA:" class="form-label" />
                        <TextField text="{{ jiraUrl }}" hint="https://your-jira-instance.com" class="form-input" />
                        
                        <Label text="Email:" class="form-label" />
                        <TextField text="{{ email }}" hint="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ email" class="form-input" />
                        
                        <Label text="ÐŸÐ°Ñ€Ð¾Ð»ÑŒ:" class="form-label" />
                        <TextField text="{{ password }}" hint="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ" secure="true" class="form-input" />
                        
                        <Button text="Ð’Ð¾Ð¹Ñ‚Ð¸" tap="{{ loginToJira }}" class="login-button" />
                    </StackLayout>
                </StackLayout>
            </ScrollView>
        </TabViewItem>
        
        <!-- Ð’ÐºÐ»Ð°Ð´ÐºÐ° Ð·Ð°Ð´Ð°Ñ‡ -->
        <TabViewItem title="Ð—Ð°Ð´Ð°Ñ‡Ð¸ JIRA">
            <GridLayout rows="auto, auto, *, auto">
                <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð² -->
                <StackLayout row="0" class="filters-panel">
                    <Label text="Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹" class="panel-title" />
                    <GridLayout columns="*, *, *, *" class="filters-grid">
                        <StackLayout col="0">
                            <Label text="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:" class="filter-label" />
                            <ListPicker items="{{ statusOptions }}" selectedIndex="{{ selectedStatusIndex }}" class="filter-picker" />
                        </StackLayout>
                        
                        <StackLayout col="1">
                            <Label text="ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚:" class="filter-label" />
                            <ListPicker items="{{ priorityOptions }}" selectedIndex="{{ selectedPriorityIndex }}" class="filter-picker" />
                        </StackLayout>
                        
                        <StackLayout col="2">
                            <Label text="Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒ:" class="filter-label" />
                            <TextField text="{{ assigneeFilter }}" hint="Ð˜Ð¼Ñ Ð¸ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ñ" class="filter-input" />
                        </StackLayout>
                        
                        <StackLayout col="3">
                            <Label text="ÐŸÐ¾Ð¸ÑÐº:" class="filter-label" />
                            <TextField text="{{ searchFilter }}" hint="ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ñ‚ÐµÐºÑÑ‚Ñƒ" class="filter-input" />
                        </StackLayout>
                    </GridLayout>
                    
                    <GridLayout columns="*, *" class="filter-buttons">
                        <Button col="0" text="ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ" tap="{{ applyFilters }}" class="apply-button" />
                        <Button col="1" text="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ" tap="{{ resetFilters }}" class="reset-button" />
                    </GridLayout>
                </StackLayout>
                
                <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¼Ð°ÑÑÐ¾Ð²Ñ‹Ñ… Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ -->
                <StackLayout row="1" class="mass-actions-panel" visibility="{{ selectedTasksCount > 0 ? 'visible' : 'collapsed' }}">
                    <Label text="{{ 'Ð’Ñ‹Ð±Ñ€Ð°Ð½Ð¾ Ð·Ð°Ð´Ð°Ñ‡: ' + selectedTasksCount }}" class="selected-count" />
                    <GridLayout columns="*, *, *" class="mass-buttons">
                        <Button col="0" text="ÐœÐ°ÑÑÐ¾Ð²Ñ‹Ð¹ PDF" tap="{{ bulkExportPdf }}" class="bulk-button" />
                        <Button col="1" text="Ð¡Ð½ÑÑ‚ÑŒ Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ" tap="{{ clearSelection }}" class="clear-button" />
                        <Button col="2" text="â˜‘ Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð²ÑÐµ" tap="{{ toggleAllSelection }}" class="select-all-button" />
                    </GridLayout>
                </StackLayout>
                
                <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð°Ð´Ð°Ñ‡ -->
                <ListView row="2" items="{{ tasks }}" class="tasks-list" itemTap="{{ onTaskTap }}">
                    <ListView.itemTemplate>
                        <GridLayout columns="auto, *, auto, auto" rows="auto, auto, auto" class="task-item">
                            <!-- Ð§ÐµÐºÐ±Ð¾ÐºÑ Ð´Ð»Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð° -->
                            <Label col="0" row="0" text="{{ selected ? 'â˜‘' : 'â˜' }}" class="task-checkbox" tap="{{ $parents['Page'].bindingContext.toggleTaskSelection }}" />
                            
                            <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð·Ð°Ð´Ð°Ñ‡Ðµ -->
                            <StackLayout col="1" row="0" rowSpan="2">
                                <Label text="{{ id }}" class="task-id" />
                                <Label text="{{ title }}" class="task-title" textWrap="true" />
                                <Label text="{{ status }}" class="task-status" />
                            </StackLayout>
                            
                            <!-- Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ -->
                            <StackLayout col="2" row="0" rowSpan="2">
                                <Label text="{{ priority }}" class="task-priority" />
                                <Label text="{{ assignee }}" class="task-assignee" />
                                <Label text="{{ updated }}" class="task-updated" />
                            </StackLayout>
                            
                            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ -->
                            <StackLayout col="3" row="0" rowSpan="2" class="action-buttons">
                                <Button text="ðŸ“" tap="{{ $parents['Page'].bindingContext.showTaskDetails }}" class="action-btn details-btn" />
                                <Button text="ðŸ“š" tap="{{ $parents['Page'].bindingContext.exportTaskPdf }}" class="action-btn pdf-btn" />
                                <Button text="ðŸ”—" tap="{{ $parents['Page'].bindingContext.openInJira }}" class="action-btn jira-btn" />
                            </StackLayout>
                        </GridLayout>
                    </ListView.itemTemplate>
                </ListView>
                
                <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¿Ð°Ð³Ð¸Ð½Ð°Ñ†Ð¸Ð¸ -->
                <StackLayout row="3" class="pagination-panel">
                    <Label text="{{ pageInfo }}" class="page-info" />
                    <GridLayout columns="auto, *, auto, auto, auto">
                        <Button col="0" text="â—€ ÐŸÑ€ÐµÐ´" tap="{{ previousPage }}" isEnabled="{{ canGoPrevious }}" class="nav-button" />
                        <Label col="1" text="ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº:" class="goto-label" />
                        <TextField col="2" text="{{ gotoPage }}" class="goto-input" />
                        <Button col="3" text="ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸" tap="{{ goToPage }}" class="nav-button" />
                        <Button col="4" text="Ð¡Ð»ÐµÐ´ â–¶" tap="{{ nextPage }}" isEnabled="{{ canGoNext }}" class="nav-button" />
                    </GridLayout>
                    <Button text="ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" tap="{{ refreshData }}" class="refresh-button" />
                </StackLayout>
            </GridLayout>
        </TabViewItem>
    </TabView>
</Page>